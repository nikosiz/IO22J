<!doctype html>
<html lang="en" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4"
      xmlns:th="http://www.thymeleaf.org">
<head><title>Account - ToyStores</title>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta content="ie=edge" http-equiv="X-UA-Compatible">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="/css/styles.css" rel="stylesheet" type="text/css">
    <script crossorigin="anonymous" integrity="sha256-nQLuAZGRRcILA+6dMBOvcRh5Pe310sBpanc6+QBmyVM="
            src="https://code.jquery.com/jquery-3.6.3.js"></script>
    <!--<script type="text/javascript" th:src="@{/js/main.js}"></script>-->
    <!--  <script>       $(function () {           $('#header').load('nav.html');       });   </script>-->  </head>
<body>

<div th:insert="fragments/nav :: header"></div>

<div class="img-container">
    <img src="/images/girl-playing.jpg" alt="Children Laughing" style="width:100%;">
    <!--<div class="center">
        <h2>Welcome to ToyStores!</h2>
        <h3>Tell us what do you need</h3>
    </div>-->
</div>

<div id="search-results-container" class="container">
    <div th:if="${cartOffers==null or cartOffers.isEmpty()}">
        <p>Your cart is empty :(</p>
    </div>

    <div th:if="${cartOffers!=null and !cartOffers.isEmpty()}">

        <!--Wyświetlenie produktów dodanych do koszyka-->
        <table id="results-table" style="margin-left:50px;margin-right:50px;" th:each="offer :${cartOffers}">
            <tr class="products-1st-row">
                <th class="product-thumbnail-th" style="border-bottom:solid;">Thumbnail</th>
                <th class="product-name-th" style="border-bottom:solid;">Product Name</th>
                <th class="product-price-th" style="border-bottom:solid;">Price</th>
                <th class="product-seller-th" style="border-bottom:solid;">Seller</th>
                <th class="product-link-th" style="border-bottom:solid;">Link</th>
                <th style="border-bottom:solid;">Delete</th>
            </tr>
            <tr>
                <td>
                    <img th:src="${offer.getThumbnailUrl()}">
                </td>
                <td th:text="${offer.getName()}" id="product-name">
                    *product name*
                </td>
                <td th:text="${offer.getPrice()}" id="product-price">
                    *price*
                </td>
                <td th:text="${offer.getSeller()}" id="product-seller">
                    *seller*
                </td>
                <td id="product-link">>
                    <a th:href="${offer.getRedirectURL()}">
                        Go to seller
                    </a>
                </td>

                <!--Usuwanie produktu z koszyka dla użytkownika zalogowanego-->
                <div sec:authorize="isAuthenticated()">
                    <td>
                        <a th:href="@{/cart/{id}(id=${offer.getId()})}" style="margin-left:auto;margin-right:auto;">
                            <i class="fa fa-trash" style="color:#72bf44;"></i>
                        </a>
                    </td>
                </div>
            </tr>
            <tr class="products-1st-row">
                <td></td>
                <th>Shipping</th>
                <th>10</th>
            </tr>
            <tr class="products-1st-row">
                <td></td>
                <th>Total price</th>
                <th th:text="${offer.getPrice()}+${offer.getShippingPrice()}">1000</th>
            </tr>
        </table>
    </div>
</div>

<div th:insert="fragments/modal :: div"></div>

<script src="/js/modal.js"></script>

</body>
</html>